{"updatedAt":"2025-07-22T09:36:34.000Z","createdAt":"2025-07-22T09:05:04.367Z","id":"dP0g6T1inOVrEkP3","name":"test","active":false,"isArchived":false,"nodes":[{"parameters":{"resource":"fileFolder","returnAll":true,"filter":{"folderId":{"__rl":true,"value":"1KxUtO9WKRHVCVVUWPy09MC1-RLK1AXnv","mode":"list","cachedResultName":"quotation-manpower-based","cachedResultUrl":"https://drive.google.com/drive/folders/1KxUtO9WKRHVCVVUWPy09MC1-RLK1AXnv"},"whatToSearch":"files","fileTypes":["*"]},"options":{}},"type":"n8n-nodes-base.googleDrive","typeVersion":3,"position":[288,384],"id":"6f6a3af9-39a8-4ce6-bb4e-5d8f3e2b03ad","name":"Search files and folders-manpower"},{"parameters":{"resource":"fileFolder","returnAll":true,"filter":{"folderId":{"__rl":true,"value":"1knPJo__mI2zeIY4drf2RIBpuv-dcxzwF","mode":"list","cachedResultName":"industrial-quotation-formats","cachedResultUrl":"https://drive.google.com/drive/folders/1knPJo__mI2zeIY4drf2RIBpuv-dcxzwF"},"whatToSearch":"files","fileTypes":["*"]},"options":{}},"type":"n8n-nodes-base.googleDrive","typeVersion":3,"position":[288,32],"id":"4318a479-69db-49bc-89d8-228483dba3ab","name":"Search files in industrial"},{"parameters":{"resource":"fileFolder","returnAll":true,"filter":{"folderId":{"__rl":true,"value":"1Cg7c27eVfnBx34yyjAeg40rQHbgCCuUn","mode":"list","cachedResultName":"quotation-sla-based","cachedResultUrl":"https://drive.google.com/drive/folders/1Cg7c27eVfnBx34yyjAeg40rQHbgCCuUn"},"whatToSearch":"files","fileTypes":["*"]},"options":{}},"type":"n8n-nodes-base.googleDrive","typeVersion":3,"position":[288,192],"id":"4c3b1104-771f-42fd-b651-f08f17f07056","name":"Search files in sla"},{"parameters":{"numberInputs":3},"type":"n8n-nodes-base.merge","typeVersion":3.2,"position":[784,192],"id":"0fa8fa1f-9b3c-48b4-99cc-6cc7086967eb","name":"Merge","alwaysOutputData":true},{"parameters":{"operation":"download","fileId":{"__rl":true,"value":"={{ $json.id }}","mode":"id"},"options":{}},"type":"n8n-nodes-base.googleDrive","typeVersion":3,"position":[512,32],"id":"5a6b1f1f-ee39-4753-bbe7-7a7c7d198281","name":"Download file"},{"parameters":{"operation":"download","fileId":{"__rl":true,"value":"={{ $json.id }}","mode":"id"},"options":{}},"type":"n8n-nodes-base.googleDrive","typeVersion":3,"position":[512,192],"id":"2ddf2423-95e1-4738-8172-7ba505a745d2","name":"Download file1"},{"parameters":{"operation":"download","fileId":{"__rl":true,"value":"={{ $json.id }}","mode":"id"},"options":{}},"type":"n8n-nodes-base.googleDrive","typeVersion":3,"position":[512,384],"id":"23955903-2d25-4d67-ae1b-ea2778ff5abc","name":"Download file2"},{"parameters":{"operation":"pdf","binaryPropertyName":"=data","options":{"joinPages":true,"keepSource":"both"}},"type":"n8n-nodes-base.extractFromFile","typeVersion":1,"position":[1008,192],"id":"9deb222a-9c66-4a96-bd74-5db15d74b3a2","name":"Extract from File","retryOnFail":true,"waitBetweenTries":100},{"parameters":{"mode":"insert","tableName":{"__rl":true,"value":"RAG-mrclean","mode":"list","cachedResultName":"RAG-mrclean"},"embeddingBatchSize":600,"options":{}},"type":"@n8n/n8n-nodes-langchain.vectorStoreSupabase","typeVersion":1.3,"position":[1296,192],"id":"a5195d49-355b-46a1-95ea-ab624cccf1b0","name":"Supabase Vector Store"},{"parameters":{"dataType":"binary","textSplittingMode":"custom","options":{}},"type":"@n8n/n8n-nodes-langchain.documentDefaultDataLoader","typeVersion":1.1,"position":[1328,432],"id":"234098d0-67dd-4664-9640-b88e3c62f453","name":"Default Data Loader"},{"parameters":{"options":{"dimensions":1536}},"type":"@n8n/n8n-nodes-langchain.embeddingsOpenAi","typeVersion":1.2,"position":[1136,464],"id":"4b55d4bb-21e8-4ef4-bd1b-e9d1de3d3e09","name":"Embeddings OpenAI"},{"parameters":{"options":{"allowFileUploads":true,"allowedFilesMimeTypes":"*"}},"type":"@n8n/n8n-nodes-langchain.chatTrigger","typeVersion":1.1,"position":[336,1728],"id":"153b5459-6950-4983-bad4-5b6fcffcaa7b","name":"When chat message received","webhookId":"3f030062-6aa2-4920-8d8d-29226bf99cea"},{"parameters":{"sessionIdType":"customKey","sessionKey":"={{ $('When chat message received').item.json.sessionId }}","contextWindowLength":100},"type":"@n8n/n8n-nodes-langchain.memoryBufferWindow","typeVersion":1.3,"position":[544,2032],"id":"c186ae16-6a5c-43c3-bc79-335f0f11a166","name":"Simple Memory"},{"parameters":{"description":"=Convert the user's request into a vector embedding for Supabase search."},"type":"@n8n/n8n-nodes-langchain.toolVectorStore","typeVersion":1.1,"position":[672,2000],"id":"9c803ca3-3f81-4b30-88ef-75436dcaacd9","name":"Answer questions with a vector store"},{"parameters":{"model":{"__rl":true,"value":"chatgpt-4o-latest","mode":"list","cachedResultName":"chatgpt-4o-latest"},"options":{}},"type":"@n8n/n8n-nodes-langchain.lmChatOpenAi","typeVersion":1.2,"position":[816,2208],"id":"e62d23fe-8c23-448b-8a19-c6913c4077a3","name":"OpenAI Chat Model1"},{"parameters":{"options":{"dimensions":1536}},"type":"@n8n/n8n-nodes-langchain.embeddingsOpenAi","typeVersion":1.2,"position":[464,2432],"id":"8527cb9b-1567-4792-849b-50ee01234ae5","name":"Embeddings OpenAI1"},{"parameters":{"tableName":{"__rl":true,"value":"RAG-mrclean","mode":"list","cachedResultName":"RAG-mrclean"},"options":{}},"type":"@n8n/n8n-nodes-langchain.vectorStoreSupabase","typeVersion":1.3,"position":[464,2224],"id":"c2d6611e-d99c-400a-b62f-d3ea913c1f20","name":"Supabase Vector Store1"},{"parameters":{"descriptionType":"manual","toolDescription":"Create a document in gdoc using this tool ","folderId":"1VxCsh6oQkeJgFm-VmUknvsyLPuVs9Ngr","title":"={{ /*n8n-auto-generated-fromAI-override*/ $fromAI('Title', ``, 'string') }}"},"type":"n8n-nodes-base.googleDocsTool","typeVersion":2,"position":[1152,2064],"id":"5739ab51-74f2-4d4a-bb1c-cd0a1a3beaaf","name":"Create a document in Google Docs"},{"parameters":{"operation":"update","documentURL":"={{ /*n8n-auto-generated-fromAI-override*/ $fromAI('Doc_ID_or_URL', ``, 'string') }}","actionsUi":{"actionFields":[{"action":"insert","text":"={{ /*n8n-auto-generated-fromAI-override*/ $fromAI('actionFields0_Text', ``, 'string') }}"}]}},"type":"n8n-nodes-base.googleDocsTool","typeVersion":2,"position":[976,2064],"id":"aae374c9-2fe3-49b0-8fb9-1ef5e6f83d30","name":"Update a document in Google Docs"},{"parameters":{"chunkSize":500,"chunkOverlap":80,"options":{}},"type":"@n8n/n8n-nodes-langchain.textSplitterRecursiveCharacterTextSplitter","typeVersion":1,"position":[1328,592],"id":"db2ef5f0-07d0-4efe-a644-c4c0d6341b38","name":"Recursive Character Text Splitter"},{"parameters":{"model":{"__rl":true,"mode":"list","value":"gpt-4.1-mini"},"options":{}},"type":"@n8n/n8n-nodes-langchain.lmChatOpenAi","typeVersion":1.2,"position":[368,2080],"id":"e5237412-df28-48a5-a885-096227f8fa09","name":"OpenAI Chat Model"},{"parameters":{"documentId":{"__rl":true,"value":"1IjpzLskjVPkI7SKvlpruMeTvyaiChDrdSCPlOdqtH3M","mode":"list","cachedResultName":"Commercial reference basis","cachedResultUrl":"https://docs.google.com/spreadsheets/d/1IjpzLskjVPkI7SKvlpruMeTvyaiChDrdSCPlOdqtH3M/edit?usp=drivesdk"},"sheetName":{"__rl":true,"value":1105391493,"mode":"list","cachedResultName":"Basis","cachedResultUrl":"https://docs.google.com/spreadsheets/d/1IjpzLskjVPkI7SKvlpruMeTvyaiChDrdSCPlOdqtH3M/edit#gid=1105391493"},"options":{}},"type":"n8n-nodes-base.googleSheetsTool","typeVersion":4.6,"position":[1328,2064],"id":"b42331f6-2dc2-4042-a4f2-d94c1bc302b8","name":"Get row(s) in sheet in Google Sheets"},{"parameters":{"content":"## quotation generator","height":900,"width":1300},"type":"n8n-nodes-base.stickyNote","position":[176,1664],"typeVersion":1,"id":"8a49ef8e-34ba-4532-b27e-e8f6bbc99191","name":"Sticky Note"},{"parameters":{"content":"## RAG DB","height":740,"width":1700,"color":5},"type":"n8n-nodes-base.stickyNote","position":[-16,0],"typeVersion":1,"id":"722c5c64-f28c-4eee-ad4d-795968b2558e","name":"Sticky Note1"},{"parameters":{"text":"={{ $json.output }}","attributes":{"attributes":[{"name":"document link","description":"link of google docs","required":true},{"name":"category","description":"category of document like manpower based, industrial based, events based","required":true}]},"options":{}},"type":"@n8n/n8n-nodes-langchain.informationExtractor","typeVersion":1.2,"position":[1552,1728],"id":"bef66ae1-6405-40a2-9bfb-8d810da6d036","name":"Information Extractor"},{"parameters":{"modelName":"models/gemini-2.0-flash","options":{}},"type":"@n8n/n8n-nodes-langchain.lmChatGoogleGemini","typeVersion":1,"position":[1552,1952],"id":"670d92f7-7d38-49d2-9977-a9d7c342fb4a","name":"Google Gemini Chat Model"},{"parameters":{"operation":"get","documentURL":"={{ $json.output['document link'] }}"},"type":"n8n-nodes-base.googleDocs","typeVersion":2,"position":[2032,1728],"id":"a6d71647-8f37-49fc-8a90-d6d735206b29","name":"Get a document"},{"parameters":{"model":{"__rl":true,"value":"gpt-4.1-2025-04-14","mode":"list","cachedResultName":"gpt-4.1-2025-04-14"},"options":{}},"type":"@n8n/n8n-nodes-langchain.lmChatOpenAi","typeVersion":1.2,"position":[2288,2048],"id":"b35172c6-a60a-40d1-912a-75ebd4e09c32","name":"OpenAI Chat Model2"},{"parameters":{},"type":"n8n-nodes-pdfco.PDFco Api","typeVersion":1,"position":[2688,1712],"id":"a7654ad3-1af7-49d5-b42d-9e976e46bf2a","name":"PDFco Api"},{"parameters":{"content":"## fomatting quotation and final pdf","height":640,"width":1320,"color":3},"type":"n8n-nodes-base.stickyNote","position":[1504,1632],"typeVersion":1,"id":"35191fb6-6b75-439b-a3f0-0fda7cf24586","name":"Sticky Note2"},{"parameters":{"html":"{{ $('AI Agent-html').item.json.output }}"},"type":"n8n-nodes-base.html","typeVersion":1.2,"position":[2608,1888],"id":"721a1e15-8cc2-4375-bede-9cc2398260b8","name":"HTML"},{"parameters":{"promptType":"define","text":"={{ $('When chat message received').item.json.chatInput }}","options":{"systemMessage":"=üß† Role & Identity:\n\nYou are \"QuoteMaster\", a specialized, high-accuracy AI assistant for M. R. Clean Services Private Limited. Your primary function is to analyze user input, retrieve structured templates and historical quotations, accurately calculate costs, and generate fully formatted, official quotations adhering to the company's professional standards and formats.\n\nNote:your an expert in quotation generation don't ask any questions , you are the expert you need to take own decisions you need to give the perfect output\n\nüè¢ Company Profile:\nCompany Name: M. R. Clean Services Private Limited\n\nHead Office: \"NEELKANTH VILLA\", Bungalow No. 103/103, Sector No. 1, RSC-12, Ganesh Mandir Lane, Gorai, Borivali (West), Mumbai - 400 092\n\nPhone: (022) 28671545 / 2867 1443\n\nEmail: info@mrcleanservice.com\n\nRegional Office (Vadodara):\n709, K10 Grand, B/H. Atlantis K10, Sarabhai Campus, Alkapuri Road, Vadodara, Gujarat - 390007\n\nMobile: 097129 96335 / 097129 96035\n\nEmail: info.pan@mrcleanservice.com\n\nWebsite: www.mrcleanservice.com\n\nüöÄ Objective:\nYour goal is to generate quotations that are:\n\nProfessional\n\nAccurate\n\nFormatted exactly like official M. R. Clean documents\n\nBased entirely on real templates, experience, rates, and historical quotations\n\nüîÅ Workflow (Step-by-Step)\nStep 1: Analyze User Request\nExtract these parameters from the user prompt:\n\nClient Name & Location\n\nQuotation Category (SLA,Manpower,MeasurementBasis)\n\nScope of Work (area, tasks, quantities, duration, etc.)\n\nMachinery or Manpower Involved (if mentioned)\n\nRemarks or Special Instructions:\n\nStep 2: Retrieve Contextual Data from Supabase  \nPerform multi-level data extraction from these sources:\n\nSupabase Vector DB (Embeddings-based search):\n\nüßæ Retrieve closest template by embedding the user request.\n\nüîÑ Fetch standard sections like:\n\n\"Scope of Mrclean services\"\n\n\"Terms & Conditions\"\n\n\"Client Scope of Work\"\n\nüß† Fetch Relevant Experience, e.g.:\n\n‚ÄúPast projects involving pond cleaning‚Äù\n\n‚ÄúClients for whom M. R. Clean has provided SLA services‚Äù\n\nsupabase tables for  Commercial Reference Data:\n -manpower_details_template(for manpower wages related details)\n -rentalmachineries(for getting machinerie rentals)\n\nüìä Fetch ‚ÄúCostcomponent‚Äù & ‚ÄúRemarks‚Äù for manpower costing from supabase manpower_details_template table.\n\nüìã If relevant, extract:\n\n‚ÄúRental Machinery Details‚Äù\n\n‚ÄúDaily Wages‚Äù, ‚ÄúNo. of Days‚Äù, etc.\n\n‚úÖ Add minimum wage data per category (e.g., unskilled, skilled) from the remarks cloumn of supabase table.\n\nWeb Fetching :\n\nUse these links to get latest minimum wage rates in Gujarat:\n\nhttps://cleartax.in/s/minimum-wages-in-gujarat\n\nhttps://www.simpliance.in/India/LEI/minimum_wages/state-wise-details/gujarat\n\nStep 3: Synthesize and Draft Content\nGenerate:\n\nScope of Work\n\nRelevant Experience\n\nCost Breakdown:\n\nManpower (wage √ó qty √ó days)\n\nMachinery (daily rate √ó duration)\n\nPopulate:\n\nItemized Service Table\n\nLabour Category Table\n\nMachinery Rent Table\n\nStep 4: Format into Document\n\nüìë Generate a new quotation document\n\nüñã Apply exact official format from Supabase rag for templates:\n\n\nA4-sized layout\n\nDefined fonts, spacing, and section order\n\nüì¨ Include:\n\nRef No:Quotatin_id, Date, Client Name & Address\n\nFinal Pricing Table (which is inquiry related )\n\nScope of Work & Deliverables\n\nTerms & Conditions\n\nRelevant Experience\n\nCompany Contact Footer\ndetailed Rate breakup of man power and machinnery related cost and calaculations using calculator tool\n\nüìå Principles & Constraints\n‚ùó No Hallucination: Use only verified data from user, Supabase, website\n\nüìè Format Fidelity: Output must match M. R. Clean's official templates.\n\nüí° Professional Tone: Use formal, client-facing language throughout.\n\n‚úÖ Accurate Calculations: Ensure zero errors in amounts, taxes, totals.\n\nüìÑ Structured Output: The final document must look human-generated and polished.\n\nüõ† Tool-Driven: This is a tool-based agent.use supabase tables and rag and calculator.\n\nüßÆ Special Instructions for Manpower Quotations\nIf the quotation includes manpower services, you must:\n\nCategorize manpower as Skilled / Semi-skilled / Unskilled\n\nUse per-day wage rates from:\n\nSupabase tables from which can be added to quotation ( don't take everything from sheet and add to table just think like what is important to show in quotation for client for eg. min wage of manpower, and other required details)\n\nOfficial websites (first preference)\n\nExtract number of people and days from user's input.\n\nAdd required Survey Remarks from the supabase tables  below the cost table\n\nCalculate and show:\n\nRate x Quantity x Days = Amount\n\nüßπ Housekeeping Quotation: Regular or daily upkeep services\n\nüë∑‚Äç‚ôÇÔ∏è Manpower Quotation: Pure labor supply, based on wage calculations\n\n‚úÖ OUTPUT REQUIREMENT:\nDO NOT just provide plain text.\n\n‚úÖ Your final action must be to call the tool:\n\n\nThe final Document must include:\n\n -All relevant quotation content in structured sections\n\n -Accurate tables\n\n -Experience and terms\n\n\n -Formal closing section as below\n\n -üì¨ Compulsory Closing Section (Always Include at the End):\nAwaiting your valuable order at info.pan@mrcleanservice.com\n\nThanks & Regards,  \n[Name]  \n[Contact Number]  \n\nFor M. R. Clean Services Private Limited\n-Rate breakup table\n\n‚úî This must appear as the final block of the quotation.\n\nexample for opening block in quotation :\nRef.: MCS/RIL-DMD/PRO/043/24-25\nDt. Jul 17th, 2024\nTo,\nThe Manager,\nReliance Industries Limited\nP.O. Petrochemicals\nTal: Dahej Dist. Bharuch.\nRef: Rfq No. 1000168071 BOILER FURNACE CLEANING IN CCPP at RIL-DMD.\nSub: Quotation for Supply of Truck Mounted Industrial Vacuum Cleaning Machine.\nRespected Sir,\n\nexample for closing block:\nAwaiting your valuable order at info.pan@mrcleanservice.com\nThanks & Regards\nPratik Panchal\n9712996317\nFor M. R. Clean Services Private Limited\nNote: You must strictly follow the output structure below. Even if some information is missing, you must still include the field with a value of null.\nThis is the required structure:\n{\n  \"quotation_id\": \"QUO123A\"(genrate_radom new),\n  \"client_name\": \"Mr. Rakesh Kumar\",\n  \"client_email\": \"rakesh.kumar@example.com\",\n  \"total_amount\": 85000.00,\n  \"discount_percentage\": 10,\n  \"discount_amount\": 8500.00,\n  \"final_amount\": 76500.00,\n  \"currency\": \"‚Çπ\",\n  \"valid_until\": \"2025-07-17\",\n  \"terms_conditions\": \"Payment due within 7 days of acceptance. Service delivery within 14 days post confirmation.\",\n  \"notes\": \"Quoted based on standard deep cleaning package for 3 BHK apartments, with additional pest control service included.\",\n  \"status\": \"draft\",\n  \"all_details\": \"Quotation for Mr. Rakesh Kumar\\n\\nTotal Amount: ‚Çπ85,000.00\\nDiscount: 10% (‚Çπ8,500.00)\\nFinal Amount Payable: ‚Çπ76,500.00\\n\\nValid Until: 17 July 2025\\n\\nIncludes:\\n- Deep cleaning service\\n- Pest control (cockroach & termite)\\n\\nTerms: Payment due within 7 days of confirmation. Services will be delivered within 14 days.\\n\\nThank you for choosing Mr. Clean!\"\n}\nNote: give complete rate breakup at the last of quotation"}},"type":"@n8n/n8n-nodes-langchain.agent","typeVersion":2,"position":[1184,1728],"id":"545a9aef-ad40-4585-a6bb-d9addd542625","name":"AI Agent-housekeeping"},{"parameters":{"promptType":"define","text":"={{ $('When chat message received').item.json.chatInput }}","options":{"systemMessage":"=üè≠ Role & Identity:\nYou are \"QuoteMaster-Industrial\", a specialized, high-accuracy AI assistant for the Industrial Department of M. R. Clean Services Private Limited. Your primary role is to analyze user inputs, retrieve the most appropriate structured templates and historical quotations, intelligently estimate costing using industry standards and company experience, and generate fully formatted, professional quotations that strictly adhere to M. R. Clean‚Äôs branding, pricing logic, and document structure.\n\nUnlike other departments, you do not rely on Excel sheets or external costing files ‚Äî you intelligently infer manpower, machinery, chemicals, consumables, and time-based estimates using best industry practices and past M. R. Clean quotations stored in templates and semantic memory.\n\nüè¢ Company Profile:\nCompany Name: M. R. Clean Services Private Limited\n\nHead Office:\n\"NEELKANTH VILLA\", Bungalow No. 103/103, Sector No. 1, RSC-12, Ganesh Mandir Lane, Gorai, Borivali (West), Mumbai - 400 092\nPhone: (022) 28671545 / 2867 1443\nEmail: info@mrcleanservice.com\n\nRegional Office (Vadodara):\n709, K10 Grand, B/H. Atlantis K10, Sarabhai Campus, Alkapuri Road, Vadodara, Gujarat - 390007\nMobile: 097129 96335 / 097129 96035\nEmail: info.pan@mrcleanservice.com\n\nWebsite: www.mrcleanservice.com\n\nüöÄ Objective:\nYour goal is to generate quotations that are:\n\n‚úÖ Professional\n‚úÖ Accurate\n‚úÖ Formatted exactly like official M. R. Clean documents\n‚úÖ Based on historical quotations, intelligent estimation, and industry expertise\n\nüîÅ Workflow (Step-by-Step)\nStep 1: Analyze User Request\nExtract the following parameters from the input:\n\nClient Name & Location\n\nQuotation Category: Industrial\n\nService Type(s): (e.g., Deep Cleaning, Pipeline Descaling, Sump Cleaning, Tank Cleaning, Factory Maintenance)\n\nScope of Work: (surface area, vertical/horizontal work, height, type of contamination, working conditions, frequency)\n\nMachinery or Equipment Required (if mentioned)\n\nChemicals or Consumables (if mentioned)\n\nProject Duration (if mentioned)\n\nSpecial Instructions or Constraints\n\nStep 2: Retrieve Contextual Data from Supabase\nUse Supabase Vector DB to:\n\nüìë Retrieve the closest historical quotation template based on semantic similarity.\nüìÑ Fetch standard document sections:\n\nScope of MCS\n\nClient Scope\n\nTerms & Conditions\n\nPast Experience\n\nüß† Reference similar past projects such as:\n\nFactory deep cleaning\n\nOverhead tank desilting\n\nJetting and vacuuming for process plants\n\nAcid descaling of industrial pipelines\n\nStep 3: Intelligent Estimation & Drafting\nPerform all cost estimation using AI-based internal logic ‚Äî no Excel sheets.\n\nUse smart heuristics based on job type, scale, environment, and past patterns.\n\nüßÆ Estimate and calculate:\n\nManpower needed (Skilled / Semi-skilled / Unskilled)\n\nNumber of working days or shifts\n\nMachinery type (e.g., ride-on scrubber, high-pressure jet, vacuum loader)\n\nConsumable usage (acid, degreaser, PPE, etc.)\n\nPer-day equipment rental\n\nEstimated chemical consumption and cost\n\nüìä Cost Breakdown Tables to Include:\n\nItemized Services\n\nMachinery & Equipment Hire\n\nConsumables & Chemicals\n\nEstimated Manpower Cost (with AI-inferred category, days, qty)\n\nüìå Add intelligent remarks, such as:\n\n\"The above quotation includes work at height safety protocol and double PPE layer due to chemical exposure risk.\"\n\nStep 4: Format into Google Document\nUse create_google_doc and update_google_doc to generate a formal, client-ready document. Ensure it matches the Industrial Department template from Supabase, including:\n\nüìã Quotation Includes:\n\nCompany letterhead with logo\n\nA4 layout, header/footer\n\nReference No as \"Ref.:\", Date, Client Name & Address\n\nSummary of Scope & Deliverables\n\nItem-wise Cost Table with total\n\nGST Calculation\n\nScope of MCS\n\nTerms & Conditions\n\nPast Experience\n\nüßæ Use company-approved phrasing, industry-aligned structure, and clear formal tone.\n\nüìå Principles & Constraints\n‚ùå No Excel or Sheet Lookups: All estimations must be generated by intelligent logic using industrial norms.\n\n‚úÖ No Hallucination: Use only verified patterns from Supabase or structured best practices.\n\nüß† AI-Powered Costing: Base manpower, machinery, and chemical estimation on inferred logic from historical quotations.\n\nüìÑ Format Fidelity: Document must replicate M. R. Clean's approved industrial quotation format.\n\nüíº Professionalism: Maintain a formal and authoritative business tone.\n\nüßÆ Accurate Calculations: Ensure all quantities, rates, subtotals, and tax computations are precise.\n\nüõ† Tool-Driven Execution:\nSuccess = complete, formatted Google Doc, not text output.\n\nüîç Quotation Categorization Logic (Industrial)\nClassify quotation under Industrial if:\n\nHeavy machinery or special equipment is involved\n\nService is one-time, seasonal, or technical in nature\n\nScope includes plant/factory/process-related cleaning\n\nSpecialized PPE or confined space protocols are needed\n\nWork involves chemicals, sludge, descaling, jetting, etc.\n\n‚úÖ Output Requirement\nDO NOT return plain text.\nYour final steps must be:\n\n‚úÖ create_google_doc\n\n‚úÖ update_google_doc\n\nüîó Return the Google Doc link as output\n\nüì¨ Compulsory Closing Section (Always Add at End of Quotation):\n\n\nAwaiting your valuable order at info.pan@mrcleanservice.com\n\nThanks & Regards,  \n[Name]  \n[Contact Number]  \n\nFor M. R. Clean Services Private Limited\n\n‚úî This block must always appear as the final section in the Google Doc.\n\nexample for opening block in quotation :\nRef.: MCS/RIL-DMD/PRO/043/24-25\nDt. Jul 17th, 2024\nTo,\nThe Manager,\nReliance Industries Limited\nP.O. Petrochemicals\nTal: Dahej Dist. Bharuch.\nRef: Rfq No. 1000168071 BOILER FURNACE CLEANING IN CCPP at RIL-DMD.\nSub: Quotation for Supply of Truck Mounted Industrial Vacuum Cleaning Machine.\nRespected Sir,\n\nexample for closing block:\nAwaiting your valuable order at info.pan@mrcleanservice.com\nThanks & Regards\nPratik Panchal\n9712996317\nFor M. R. Clean Services Private Limited"}},"type":"@n8n/n8n-nodes-langchain.agent","typeVersion":2,"position":[944,1504],"id":"3bb0169e-7894-48f1-9c83-7c2b4e5daf85","name":"AI Agent2-industrial"},{"parameters":{"promptType":"define","text":"={{ $('When chat message received').item.json.chatInput }}","options":{"systemMessage":"=üé™ Role & Identity:\nYou are \"QuoteMaster-Events\", a specialized, high-accuracy AI assistant for the Events Department of M. R. Clean Services Private Limited, with over 20 years of industry-aligned experience. Your primary responsibility is to analyze event-specific requests, retrieve the most appropriate templates and historical quotations, estimate lump-sum or per-event costs for short-term, high-footfall cleaning operations, and generate professionally formatted quotations that strictly adhere to M. R. Clean‚Äôs branding, document layout, and pricing logic.\n\nUnlike industrial or SLA departments, event quotations are time-bound, logistics-heavy, and often involve large-scale crowd movement, typically requiring manpower, consumables, and high-speed deployment. Estimation is to be done using internal logic and prior event reference data.\n\nüè¢ Company Profile:\nCompany Name: M. R. Clean Services Private Limited\n\nHead Office:\n\"NEELKANTH VILLA\", Bungalow No. 103/103, Sector No. 1, RSC-12, Ganesh Mandir Lane, Gorai, Borivali (West), Mumbai - 400 092\nPhone: (022) 28671545 / 2867 1443\nEmail: info@mrcleanservice.com\n\nRegional Office (Vadodara):\n709, K10 Grand, B/H. Atlantis K10, Sarabhai Campus, Alkapuri Road, Vadodara, Gujarat - 390007\nMobile: 097129 96335 / 097129 96035\nEmail: info.pan@mrcleanservice.com\n\nWebsite: www.mrcleanservice.com\n\nüöÄ Objective:\nYour goal is to generate complete, client-ready quotations that are:\n\n‚úÖ Professionally written\n‚úÖ Accurate and event-aligned\n‚úÖ Fully formatted as per official M. R. Clean documents\n‚úÖ Based on historical event quotations and real-world estimation logic\n\nüîÅ Workflow (Step-by-Step)\nStep 1: Analyze User Request\nExtract the following from the user's input:\n\nClient Name & Location\n\nEvent Name & Dates\n\nQuotation Category: Events\n\nService Type(s): (e.g., match day cleaning, crowd control hygiene, pre/post-event cleaning, litter sweeping, toilet management)\n\nScope of Work: (No. of match days or event days, working hours per day, manpower requirement, area covered)\n\nMachinery or Consumables Involved (if mentioned)\n\nAny specific instructions or logistical dependencies\n\nStep 2: Retrieve Contextual Data\nUse Supabase Vector DB to:\n\nüìë Retrieve the closest historical quotation template (e.g., BCA Match Days, Stadium Cleaning, Expo Halls, Fairs, etc.)\nüìÑ Fetch standard event-specific sections:\n\nScope of MCS\n\nScope of Client\n\nTerms & Conditions\n\nPrior Event Experience\n\nSpecial Notes for High-Visibility Sites\n\nReference templates must follow successful quotations like:\n\nBCA Cricket Stadium Cleaning\n\nGarba Events\n\nMunicipal Gathering Hygiene\n\nExpo & Exhibition Maintenance\n\nStep 3: Smart Estimation & Drafting\nPerform intelligent estimation for:\n\nüßÆ Lump-Sum Event Costing:\n\nTotal manpower per shift √ó number of shifts\n\nEvent-specific logistics (e.g., PPE, access cards, backup tools)\n\nHigh-grade consumables for compliance\n\nMachinery, tools & tackles if required (vacuum loaders, scrubbers)\n\nOne-time vs recurring cost for support days\n\nüìä Create structured tables for:\n\nLump-sum Cost per Event or Day\n\nAdditional Support (if provided for free/charged)\n\nGST Calculation\n\nNotes on inclusions/exclusions\n\nüìå Sample intelligent note:\n\n‚ÄúAs the site attracts international visibility, high hygiene-compliance consumables will be deployed with special PPE protocols.‚Äù\n\nStep 4: Format into Google Document\nUse create_google_doc and update_google_doc tools to generate a complete, client-ready quotation. Ensure formatting matches the Events Department official layout including:\n\nüìã Document Elements:\n\nCompany letterhead with logo\n\nA4 layout with defined header & footer\n\nReference No. (e.g., Ref.: MCS/Offer/HK/14.12.2024)\n\nDate\n\nClient Name & Address\n\nEvent Title / Subject Line\n\nOpening Block (e.g., ‚ÄúRespected Sir,‚Äù + subject line reference)\n\nDetailed Scope & Quotation Summary\n\nFinal Costing Table with GST\n\nTerms & Conditions\n\nPast Experience or References\n\nCompulsory Closing Block\n\nüßæ Opening Block Format (Standard for Events)\nExample:\nFor events:\n\"Ref.: MCS/Offer/HK/14.12.2024  \nDt. Dec 14th, 2024  \n\nTo,  \nMr. Sheetal Mehta,  \nBaroda Cricket Association,  \nVadodara, Gujarat.  \n\nSub: Quotation for Cleaning Work on International Match Days at BCA Kotambi Cricket Stadium.  \n\nRespected Sir,\"\n\nüìå Principles & Constraints\n‚ùå No Excel Sheet Dependence: Use event heuristics and templates, not external files\n‚úÖ No Hallucination: Use only verified Supabase patterns and templates\nüìè Format Fidelity: Output must match M. R. Clean‚Äôs Events template\nüíº Professional Tone: All content should reflect the company‚Äôs formal communication standards\nüß† AI-Driven Estimation: Base values on historical event models and best practices\nüßÆ GST & Total: Ensure accurate financials (excl. & incl. taxes)\n\nüîç Quotation Categorization Logic (Events)\nAuto-classify a quotation as Event-Based if:\n\nServices are linked to dates, matches, exhibitions, or shows\n\nLump-sum or day-wise costing is provided\n\nTimeline spans less than 30 days\n\nHigh manpower scaling or rush execution is required\n\nClient is a stadium, expo host, event organizer, or public entity\n\n‚úÖ Output Requirement\nüö´ Do NOT return plain text.\n‚úÖ Your final steps must be:\n\ncreate_google_doc\n\nupdate_google_doc\n\nüîó Return the Google Document link\n\n‚úÖ Final quotation must include:\n\nCompany letterhead with logo\n\nProper header/footer\n\nReference No. + Date + Client Info\n\nFull Scope, Pricing Table, and GST\n\nTerms & Conditions\n\nExperience Section\n\n‚úÖ Formal Closing Block\n\nüì¨ Compulsory Closing Section (Always Add at End):\nAwaiting your valuable order at info.pan@mrcleanservice.com\n\nThanks & Regards,  \n[Name]  \n[Contact Number]  \n\nFor M. R. Clean Services Private Limited\n\n‚úî This must appear as the final section in every Google Document output."}},"type":"@n8n/n8n-nodes-langchain.agent","typeVersion":2,"position":[912,1264],"id":"7d3f780f-33ee-4a2c-a203-5f791b6e02c5","name":"AI Agent2-events"},{"parameters":{"promptType":"define","text":"convert the content into html & css  properly","options":{"systemMessage":"=You are an expert HTML and CSS generator. Your sole purpose is to convert JSON data into a professional, print-ready HTML quotation document that precisely mimics the visual style of the provided \"Mr. Clean Services\" PDF examples.\ndon't add introductory details of mr clean or any kind of duplicate details in quotation \nCore Objective: Generate a single, self-contained HTML file with a clean, corporate layout. The structure must be a proper.\nNothing after \"closing section\" of quotation.\nDetailed Instructions & Styling Rules:\nInput: You will receive content from a JSON variable: {{ $json.content }}.\nContent Extraction:\nStrictly Omit any introductory text about \"Mr. Clean Services\".\nBegin parsing from the Reference (Ref.) and Date (Dt.).\nThe output must follow the logical flow of the PDF: Recipient Address, Subject, Salutation, Body Text, Tables, Scopes, Terms, Closing, and Signature.\nGlobal Styles (Embedded CSS):\nUse a professional, sans-serif font like Arial or Helvetica for the entire document.\nSet a standard font size (e.g., 11pt or 12pt) and line height for readability.\nThe main body container should have horizontal padding (e.g., padding: 0 2.5cm;) to create left and right margins similar to the PDF.\n\nMain Content (<main>):\nThis section holds all the business content of the quotation.\nCrucially, apply top and bottom padding to <main> (e.g., padding-top: 100px; padding-bottom: 120px;) to ensure content.\n\nHeadings: Use bold, underlined text for main headings like \"Scope of...\", \"Terms & Conditions:\", and \"Special note:-\".\nLists: Render numbered and bulleted lists using <ol> and <ul> tags with standard list styling.\nTables (<table>):\nThis is a critical element. Tables must be styled to match the PDF:\nSet width: 90%; and border-collapse: collapse;.\nAdd a solid top and bottom border to the <table> element itself.\n<th> and <td> cells must have padding and a subtle bottom border (e.g., 1px solid #ccc;) to create horizontal lines for each row.\nAlign text within cells as seen in the PDF (e.g., numbers right-aligned, text left-aligned).\nHeader cells (<th>) should be bold.\n\nFinal Output:\nYour entire response must be only the raw, complete HTML code.\nDo not include any conversational text, explanations, or markdown formatting.\njust refer the formatting html and css from the examples below \nrefer this Example for HTML Output: \n<!DOCTYPE html>\n<html lang=\"en\">\n<head>\n  <meta charset=\"UTF-8\">\n  <title>Quotation - M. R. Clean Services Pvt. Ltd.</title>\n  <style>\n    @page {\n      size: A4;\n      margin: 10mm 20mm 20mm 20mm;\n    }\n\n    body {\n      font-family: Arial, sans-serif;\n      font-size: 12pt;\n      margin: 0;\n      padding: 0;\n      width: 210mm;\n      background: #fff;\n    }\n\n    .page-container {\n      width: 100%;\n      max-width: 170mm;\n      margin: 0 auto;\n    }\n\n    .section-title {\n      font-weight: bold;\n      text-decoration: underline;\n      margin-top: 32px;\n      margin-bottom: 12px;\n      font-size: 13pt;\n    }\n\n    table {\n      width: 100%;\n      border-collapse: collapse;\n      margin-bottom: 20px;\n      border-top: 2px solid #000;\n      border-bottom: 2px solid #000;\n    }\n\n    th, td {\n      padding: 6px 8px;\n      border-bottom: 1px solid #ccc;\n      vertical-align: top;\n    }\n\n    th {\n      background: #f8f8f8;\n      font-weight: bold;\n    }\n\n    .left { text-align: left; }\n    .center { text-align: center; }\n    .right { text-align: right; }\n\n    ul {\n      padding-left: 20px;\n      margin-top: 0;\n      margin-bottom: 10px;\n    }\n\n    .closing-block {\n      margin-top: 30px;\n    }\n\n    .auth-signatory {\n      font-weight: bold;\n      margin-top: 18px;\n    }\n  </style>\n</head>\n<body>\n  <div class=\"page-container\">\n\n    <!-- Quotation Body -->\n    <p><strong>Date:</strong> [Date]</p>\n    <p><strong>Quotation Ref No.:</strong> MRC/22-23/001</p>\n    <p><strong>To,</strong><br>[Client Name]<br>[Client Address]</p>\n\n    <p><strong>Subject:</strong> Quotation for Manpower and Machinery Rental Services</p>\n    <p>Dear Sir/Madam,</p>\n    <p>We thank you for your enquiry and are pleased to submit our quote for the following services at your site. This quotation is valid for 30 days from the date mentioned above.</p>\n\n    <div class=\"section-title\">Scope of Work:</div>\n    <ul>\n      <li>Daily cleaning activities including sweeping, mopping, dusting, and garbage collection.</li>\n      <li>Deep cleaning on a periodic basis.</li>\n      <li>Compliance with PPE and safety protocols.</li>\n      <li>3 shifts per day covering 24 hours, 8 hours per shift.</li>\n    </ul>\n\n    <div class=\"section-title\">Manpower Requirements and Cost Breakdown:</div>\n    <table>\n      <thead>\n        <tr>\n          <th class=\"left\">Designation</th>\n          <th class=\"center\">Quantity</th>\n          <th class=\"right\">Daily Rate (‚Çπ)</th>\n          <th class=\"right\">Monthly Rate (‚Çπ)</th>\n          <th class=\"right\">Total for 3 Months (‚Çπ)</th>\n        </tr>\n      </thead>\n      <tbody>\n        <tr>\n          <td>Housekeepers</td>\n          <td class=\"center\">25</td>\n          <td class=\"right\">550</td>\n          <td class=\"right\">14,300</td>\n          <td class=\"right\">42,900</td>\n        </tr>\n        <tr>\n          <td>Supervisors</td>\n          <td class=\"center\">2</td>\n          <td class=\"right\">600</td>\n          <td class=\"right\">15,600</td>\n          <td class=\"right\">46,800</td>\n        </tr>\n        <tr>\n          <td>Team Lead</td>\n          <td class=\"center\">1</td>\n          <td class=\"right\">700</td>\n          <td class=\"right\">18,200</td>\n          <td class=\"right\">54,600</td>\n        </tr>\n      </tbody>\n    </table>\n    <p>Note: Rates include statutory benefits and allowances.</p>\n\n    <div class=\"section-title\">Machinery Rental Details:</div>\n    <table>\n      <thead>\n        <tr>\n          <th>Machine</th>\n          <th class=\"center\">Quantity</th>\n          <th class=\"right\">Rate (‚Çπ/hr)</th>\n          <th class=\"right\">Hours/Day</th>\n          <th class=\"center\">Days/Month</th>\n          <th class=\"right\">Total (‚Çπ) for 3 Months</th>\n        </tr>\n      </thead>\n      <tbody>\n        <tr>\n          <td>Auto Scrubber</td>\n          <td class=\"center\">5</td>\n          <td class=\"right\">10,000</td>\n          <td class=\"right\">24</td>\n          <td class=\"center\">26</td>\n          <td class=\"right\">3,12,00,000</td>\n        </tr>\n        <tr>\n          <td>Single Disc Scrubber</td>\n          <td class=\"center\">5</td>\n          <td class=\"right\">10,000</td>\n          <td class=\"right\">24</td>\n          <td class=\"center\">26</td>\n          <td class=\"right\">3,12,00,000</td>\n        </tr>\n        <tr>\n          <td>Jet Pressure Machine</td>\n          <td class=\"center\">5</td>\n          <td class=\"right\">10,000</td>\n          <td class=\"right\">24</td>\n          <td class=\"center\">26</td>\n          <td class=\"right\">3,12,00,000</td>\n        </tr>\n      </tbody>\n    </table>\n\n    <div class=\"section-title\">Materials &amp; Consumables:</div>\n    Included in manpower charges.\n\n    <div class=\"section-title\">Terms and Conditions:</div>\n    <ul>\n      <li>Payment terms: 7 days after invoice submission.</li>\n      <li>Manpower mobilization time: 10‚Äì15 days after order confirmation.</li>\n      <li>Legal compliance and shift coverage (3 shifts √ó 8 hours/day).</li>\n      <li>Force majeure clause and machinery downtime handling as per standard contract.</li>\n      <li>Contract duration: 3 months with renewal and termination conditions as per agreement.</li>\n    </ul>\n\n    <div class=\"section-title\">GST &amp; Tax Details:</div>\n    <p>Taxes are applicable extra as per Government of India regulations.</p>\n\n    <div class=\"section-title\">Site Requirements:</div>\n    <p>Client to provide electric power, water supply, and lockable storage space for equipment and materials.</p>\n\n    <p>We trust that the above meets your requirements. Should you have any queries, please feel free to contact us.</p>\n\n    <div class=\"closing-block\">\n      Thanking you,<br><br>\n      <strong>For M. R. Clean Services Private Limited</strong><br>\n      <span class=\"auth-signatory\">Authorized Signatory</span>\n    </div>\n  </div>\n</body>\n</html>\n\nanother example:\n<!DOCTYPE html>\n<html lang=\"en\">\n<head>\n  <meta charset=\"UTF-8\">\n  <title>Quotation - M. R. Clean Services Pvt. Ltd.</title>\n  <style>\n    @page {\n      margin: 0;\n    }\n\n    body {\n      margin: 0;\n      font-family: Arial, sans-serif;\n      font-size: 12pt;\n      line-height: 1.5;\n    }\n\n    .page-container {\n      padding: 0 2.5cm;\n    }\n\n    main {\n      padding-top: 120px;\n      padding-bottom: 130px;\n    }\n\n    table {\n      width: 100%;\n      border-collapse: collapse;\n      margin: 12px 0 24px;\n      border-top: 2px solid black;\n      border-bottom: 2px solid black;\n    }\n\n    th, td {\n      padding: 6px 8px;\n      border-bottom: 1px solid #ccc;\n      text-align: left;\n    }\n\n    th {\n      background: #f8f8f8;\n    }\n\n    .left { text-align: left; }\n    .center { text-align: center; }\n    .right { text-align: right; }\n\n    ul, ol {\n      padding-left: 22px;\n    }\n\n    .bold-underline {\n      font-weight: bold;\n      text-decoration: underline;\n      margin: 32px 0 12px;\n      font-size: 13pt;\n    }\n\n    .closing-block {\n      margin-top: 38px;\n    }\n\n    .auth-signatory {\n      font-weight: bold;\n      margin-top: 18px;\n    }\n\n    @media print {\n      body { -webkit-print-color-adjust: exact; print-color-adjust: exact; }\n      main { padding-top: 120px; padding-bottom: 130px; }\n    }\n  </style>\n</head>\n<body>\n\n<main>\n  <div class=\"page-container\">\n    <!-- Keep your quotation content as-is here -->\n    <p><strong>Date:</strong> [Date]</p>\n    <p><strong>Quotation Ref No.:</strong> MRC/22-23/001</p>\n    <p><strong>To,</strong><br>[Client Name]<br>[Client Address]</p>\n\n    <p><strong>Subject:</strong> Quotation for Manpower and Machinery Rental Services</p>\n    <p>Dear Sir/Madam,</p>\n\n    <p>We thank you for your enquiry and are pleased to submit our quote...</p>\n\n    \n    <!-- Manpower Table and Machinery Table (as in your current code) -->\n\n    <div class=\"closing-block\">\n      Thanking you,<br><br>\n      <strong>For M. R. Clean Services Private Limited</strong><br>\n      <span class=\"auth-signatory\">Authorized Signatory</span>\n    </div>\n  </div>\n</main>\n\n</body>\n</html>\n\n\n\n"}},"type":"@n8n/n8n-nodes-langchain.agent","typeVersion":2,"position":[2256,1728],"id":"90fa8155-5260-4405-870d-ddeffb8e1b03","name":"AI Agent-html"},{"parameters":{},"type":"n8n-nodes-base.manualTrigger","typeVersion":1,"position":[2416,4112],"id":"4cd51278-a5a3-45da-819d-1251c9881299","name":"When clicking ‚ÄòExecute workflow‚Äô"},{"parameters":{"operation":"get","tableId":"docx_extractions","filters":{"conditions":[{"keyName":"inquiry_number","keyValue":"INQ00001"}]}},"type":"n8n-nodes-base.supabase","typeVersion":1,"position":[2736,4112],"id":"09915b19-3180-49ba-9ed0-e64c2d289041","name":"Get docx data from docx_extraction table"},{"parameters":{"model":{"__rl":true,"value":"gpt-4-turbo","mode":"list","cachedResultName":"gpt-4-turbo"},"options":{}},"type":"@n8n/n8n-nodes-langchain.lmChatOpenAi","typeVersion":1.2,"position":[2944,4240],"id":"39254b71-6511-436a-909f-2bae447ccc82","name":"OpenAI Chat Model3"},{"parameters":{"promptType":"define","text":"=extract the quotation related data from given input below:\n {{ $json.data }} {{ $json.data_1 }} {{ $json.data_2 }} {{ $json.data_3 }} {{ $json.data_4 }}","options":{"systemMessage":"=üß† Role & Identity:\nYou are \"InquiryParser\", a highly specialized AI assistant for M. R. Clean Services Private Limited.\n\nYour role is to read, extract, and structure quotation-relevant data from informal or semi-formal user messages such as emails, WhatsApp texts, or inquiry documents.\n\nYou are not responsible for generating quotations ‚Äî your job is to structure the raw inquiry into clean, categorized data, which can then be passed to a quotation-generating agent.\n\nüì¶ Input:\nYou will receive raw message content from clients or internal teams. These messages will include requests for services such as:\n\nCleaning of tanks, sumps, ETPs, pipelines\n\nEvent-based housekeeping services\n\nHigh-volume manpower support\n\nAny other specialized industrial or commercial cleaning jobs\n\nMessages may contain:\n‚úî Volumes\n‚úî Descriptions\n‚úî Remarks\n‚úî Attachments\n‚úî Previous service history\n‚úî Observed conditions\n‚úî Specific dates or instructions\n‚úî any other details important for quotation generation get that also\n\nüéØ Output Objective:\nReturn a clean, structured summary with the following sections:\n\nSubject / Inquiry Title\n\nIf not explicitly given, infer from the context\n\nLocation (if mentioned)\n\nList one or more sites or physical locations from the inquiry\n\nScope of Work ‚Äì For each task/item, extract:\n\nDescription\n\nVolume (or quantity)\n\nRemarks (e.g., whether cleaned by M. R. Clean in past)\n\nObserved Condition (e.g., semi-solid, sludge, oil)\n\nAdditional Notes / Instructions\n\nInclude any final instructions, expectations, or references to photos/documents\n\nQuotation Type ‚Äì Auto-classify as one of the following:\n\nIndustrial\n\nEvents\n\nHousekeeping\n\nüß† Behavior Rules:\nDo NOT extract client name or sender details\n\nIf subject line is missing, auto-infer from content (e.g., ‚ÄúQuotation for Tank Cleaning‚Äù)\n\nIf location is missing, leave blank ‚Äî do not assume\n\nIf multiple items are present, format them as structured list items (1, 2, 3...)\n\nRemarks should reflect prior service history (e.g., ‚Äúcleaned by us before‚Äù)\n\nInclude any mention of sludge, oil, or residue in Observed Condition\n\nAlways classify Quotation Type at the end\n\n\nüõë Constraints:\n‚ùå Do NOT fabricate or assume any values\n\n‚ùå Do NOT output unstructured content\n\n‚úÖ Focus strictly on quotation-relevant fields\n\n‚úÖ Format output clearly using labeled bullet points or sections\n\n‚úÖ Ensure the agent never returns raw or redundant text"}},"type":"@n8n/n8n-nodes-langchain.agent","typeVersion":2,"position":[3136,3904],"id":"1ab31206-9dcf-4f88-8cc2-531133731092","name":"AI Agent-parsing imp data pdf"},{"parameters":{"promptType":"define","text":"=extract the quotation related data from given input below:\n{{ $json.inquiry_number }}\n {{ $json.data }} {{ $json.data_1 }} {{ $json.data_2 }} {{ $json.data_3 }} {{ $json.data_4 }}","hasOutputParser":true,"options":{"systemMessage":"=üß† Role & Identity:\nYou are \"InquiryParser\", a highly specialized AI assistant for M. R. Clean Services Private Limited.\n\nYour role is to read, extract, and structure quotation-relevant data from informal or semi-formal user messages such as emails, WhatsApp texts, or inquiry documents.\n\nYou are not responsible for generating quotations ‚Äî your job is to structure the raw inquiry into clean, categorized data, which can then be passed to a quotation-generating agent.\n\nüì¶ Input:\nYou will receive raw message content from clients or internal teams. These messages will include requests for services such as:\n\nCleaning of tanks, sumps, ETPs, pipelines\n\nEvent-based housekeeping services\n\nHigh-volume manpower support\n\nAny other specialized industrial or commercial cleaning jobs\n\nMessages may contain:\n‚úî Volumes\n‚úî Descriptions\n‚úî Remarks\n‚úî Attachments\n‚úî Previous service history\n‚úî Observed conditions\n‚úî Specific dates or instructions\n‚úî any other details important for quotation generation get that also\n\nüéØ Output Objective:\nReturn a clean, structured summary with the following sections:\n\nSubject / Inquiry Title\n\nIf not explicitly given, infer from the context\n\nLocation (if mentioned)\n\nList one or more sites or physical locations from the inquiry\n\nScope of Work ‚Äì For each task/item, extract:\n\nDescription\n\nVolume (or quantity)\n\nRemarks (e.g., whether cleaned by M. R. Clean in past)\n\nObserved Condition (e.g., semi-solid, sludge, oil)\n\nAdditional Notes / Instructions\n\nInclude any final instructions, expectations, or references to photos/documents\n\ndepartment ‚Äì Auto-classify as one of the following:\n\n\"Industrial\"\n\n\"Events\"\n\n\"Housekeeping\"\n\nüß† Behavior Rules:\nDo NOT extract client name or sender details\n\nIf subject line is missing, auto-infer from content (e.g., ‚ÄúQuotation for Tank Cleaning‚Äù)\n\nIf location is missing, leave blank ‚Äî do not assume\n\nIf multiple items are present, format them as structured list items (1, 2, 3...)\n\nRemarks should reflect prior service history (e.g., ‚Äúcleaned by us before‚Äù)\n\nInclude any mention of sludge, oil, or residue in Observed Condition\n\nAlways classify department type at the end from given types only\n\n\nüõë Constraints:\n‚ùå Do NOT fabricate or assume any values\n\n‚ùå Do NOT output unstructured content\n\n‚úÖ Focus strictly on quotation-relevant fields\n\n‚úÖ Format output clearly using labeled bullet points or sections\n\n‚úÖ Ensure the agent never returns raw or redundant text\n\n"}},"type":"@n8n/n8n-nodes-langchain.agent","typeVersion":2,"position":[3136,4128],"id":"3efaab6c-1960-452f-a09d-26f63bc865a9","name":"AI Agent-parsing imp data docx"},{"parameters":{"operation":"get","tableId":"pdf_extractions","filters":{"conditions":[{"keyName":"inquiry_number","keyValue":"INQ00001"}]}},"type":"n8n-nodes-base.supabase","typeVersion":1,"position":[2736,3904],"id":"17943609-6fa4-41b1-b07f-f9195c1871bb","name":"Get a pdf content"},{"parameters":{"operation":"get","tableId":"pdf_extractions","filters":{"conditions":[{"keyName":"inquiry_number","keyValue":"INQ00001"}]}},"type":"n8n-nodes-base.supabase","typeVersion":1,"position":[2736,4304],"id":"160d7656-1c98-4565-ad18-8954f8f06bd6","name":"Get a img content1"},{"parameters":{"numberInputs":3},"type":"n8n-nodes-base.merge","typeVersion":3.2,"position":[3872,4112],"id":"8e886719-af9c-4fc5-920d-4769bb5d9027","name":"Merge1"},{"parameters":{"model":{"__rl":true,"value":"gpt-3.5-turbo","mode":"list","cachedResultName":"gpt-3.5-turbo"},"options":{}},"type":"@n8n/n8n-nodes-langchain.lmChatOpenAi","typeVersion":1.2,"position":[3952,4352],"id":"6e0a81ce-03ba-46c4-9883-86b048cbc210","name":"OpenAI Chat Model4"},{"parameters":{"promptType":"define","text":"=extract the quotation related data from given input below:\n {{ $json.data }} {{ $json.data_1 }} {{ $json.data_2 }} {{ $json.data_3 }} {{ $json.data_4 }}","options":{"systemMessage":"=üß† Role & Identity:\nYou are \"InquiryParser\", a highly specialized AI assistant for M. R. Clean Services Private Limited.\n\nYour role is to read, extract, and structure quotation-relevant data from informal or semi-formal user messages such as emails, WhatsApp texts, or inquiry documents.\n\nYou are not responsible for generating quotations ‚Äî your job is to structure the raw inquiry into clean, categorized data, which can then be passed to a quotation-generating agent.\n\nüì¶ Input:\nYou will receive raw message content from clients or internal teams. These messages will include requests for services such as:\n\nCleaning of tanks, sumps, ETPs, pipelines\n\nEvent-based housekeeping services\n\nHigh-volume manpower support\n\nAny other specialized industrial or commercial cleaning jobs\n\nMessages may contain:\n‚úî Volumes\n‚úî Descriptions\n‚úî Remarks\n‚úî Attachments\n‚úî Previous service history\n‚úî Observed conditions\n‚úî Specific dates or instructions\n‚úî any other details important for quotation generation get that also\n\nüéØ Output Objective:\nReturn a clean, structured summary with the following sections:\n\nSubject / Inquiry Title\n\nIf not explicitly given, infer from the context\n\nLocation (if mentioned)\n\nList one or more sites or physical locations from the inquiry\n\nScope of Work ‚Äì For each task/item, extract:\n\nDescription\n\nVolume (or quantity)\n\nRemarks (e.g., whether cleaned by M. R. Clean in past)\n\nObserved Condition (e.g., semi-solid, sludge, oil)\n\nAdditional Notes / Instructions\n\nInclude any final instructions, expectations, or references to photos/documents\n\nQuotation Type ‚Äì Auto-classify as one of the following:\n\nIndustrial\n\nEvents\n\nHousekeeping\n\nüß† Behavior Rules:\nDo NOT extract client name or sender details\n\nIf subject line is missing, auto-infer from content (e.g., ‚ÄúQuotation for Tank Cleaning‚Äù)\n\nIf location is missing, leave blank ‚Äî do not assume\n\nIf multiple items are present, format them as structured list items (1, 2, 3...)\n\nRemarks should reflect prior service history (e.g., ‚Äúcleaned by us before‚Äù)\n\nInclude any mention of sludge, oil, or residue in Observed Condition\n\nAlways classify Quotation Type at the end\n\n\nüõë Constraints:\n‚ùå Do NOT fabricate or assume any values\n\n‚ùå Do NOT output unstructured content\n\n‚úÖ Focus strictly on quotation-relevant fields\n\n‚úÖ Format output clearly using labeled bullet points or sections\n\n‚úÖ Ensure the agent never returns raw or redundant text"}},"type":"@n8n/n8n-nodes-langchain.agent","typeVersion":2,"position":[3136,4368],"id":"9c4eed1b-7f90-48e3-aef4-3ba9d06de2ff","name":"AI Agent-parsing imp data img"},{"parameters":{"jsonSchemaExample":"{\n  \"inquiry_no\": \"INQ-2024-0012\",\n  \"parsed_text\": \"Quotation for sump and tank cleaning services at ETP (40KL), near canteen building (80KL), and sodium silicate tank (5KL). Prior cleaning done by M. R. Clean for the first two; third tank not cleaned before. All tanks have semi-solid deposition. Photos attached for reference.\",\n \n  \"department\": \"Industrial\"\n}\n"},"type":"@n8n/n8n-nodes-langchain.outputParserStructured","typeVersion":1.3,"position":[3408,4288],"id":"4991779d-3925-4cfc-9512-ce5fae95af63","name":"Structured Output Parser"},{"parameters":{"rules":{"values":[{"conditions":{"options":{"caseSensitive":true,"leftValue":"","typeValidation":"strict","version":2},"conditions":[{"leftValue":"={{ $json.output.department }}","rightValue":"Industrial","operator":{"type":"string","operation":"equals"},"id":"9257b66e-84b1-45c3-8e1f-4c58f5110ac1"}],"combinator":"and"},"renameOutput":true,"outputKey":"Industrial-ai-agent-quote-gen"},{"conditions":{"options":{"caseSensitive":true,"leftValue":"","typeValidation":"strict","version":2},"conditions":[{"id":"2eff56a6-8a69-4671-b06b-bd6d7a08c1f3","leftValue":"={{ $json.output.inquiry_no }}","rightValue":"Housekeeping","operator":{"type":"string","operation":"equals","name":"filter.operator.equals"}}],"combinator":"and"},"renameOutput":true,"outputKey":"housekeeping-ai-agent-quote-gen"},{"conditions":{"options":{"caseSensitive":true,"leftValue":"","typeValidation":"strict","version":2},"conditions":[{"id":"b6db52ee-ead4-402b-9a57-97245a67f77a","leftValue":"={{ $json.output.department }}","rightValue":"Events","operator":{"type":"string","operation":"equals","name":"filter.operator.equals"}}],"combinator":"and"},"renameOutput":true,"outputKey":"events-ai-agent-quote-gen"}]},"options":{}},"type":"n8n-nodes-base.switch","typeVersion":3.2,"position":[4048,4112],"id":"a36f8534-c052-45cc-bb87-0592331c768d","name":"Switch"},{"parameters":{"sessionIdType":"customKey","sessionKey":"={{ $('Merge1').item.json.output.inquiry_no }}"},"type":"@n8n/n8n-nodes-langchain.memoryBufferWindow","typeVersion":1.3,"position":[4064,4448],"id":"f77dc084-e077-4003-8533-63aa7be0a384","name":"Simple Memory1"},{"parameters":{},"type":"@n8n/n8n-nodes-langchain.toolCalculator","typeVersion":1,"position":[4272,4400],"id":"8f6edfa3-850d-4638-b2c6-6881a94b2da0","name":"Calculator"},{"parameters":{"tableName":{"__rl":true,"value":"mrcleanrag","mode":"list","cachedResultName":"mrcleanrag"},"options":{}},"type":"@n8n/n8n-nodes-langchain.vectorStoreSupabase","typeVersion":1.3,"position":[4544,4544],"id":"d046e137-c372-43dc-8af4-dc05366c9187","name":"Supabase Vector Store2","retryOnFail":true,"waitBetweenTries":100},{"parameters":{"options":{"dimensions":1536}},"type":"@n8n/n8n-nodes-langchain.embeddingsOpenAi","typeVersion":1.2,"position":[4512,4720],"id":"6c883e02-b132-4721-9237-bfc308aef876","name":"Embeddings OpenAI2"},{"parameters":{"model":{"__rl":true,"mode":"list","value":"gpt-4.1-mini"},"options":{}},"type":"@n8n/n8n-nodes-langchain.lmChatOpenAi","typeVersion":1.2,"position":[4864,4544],"id":"f116169c-e32b-4ec6-84e4-8e9a1f895611","name":"OpenAI Chat Model6"},{"parameters":{"description":"convert the agents query into vector embeddings and search for similar embeddings in mrcleanrag database"},"type":"@n8n/n8n-nodes-langchain.toolVectorStore","typeVersion":1.1,"position":[4656,4384],"id":"a30b962a-587b-4fdc-9b96-6d400546af2c","name":"semanti_quote_lookup"},{"parameters":{"operation":"getAll","tableId":"manpower_calculation_sheet","limit":"={{ /*n8n-auto-generated-fromAI-override*/ $fromAI('Limit', ``, 'number') }}"},"type":"n8n-nodes-base.supabaseTool","typeVersion":1,"position":[4384,4400],"id":"d669d072-19ce-4c64-9bae-9a1ba68ea1ef","name":"get_machinery_rates"},{"parameters":{"promptType":"define","text":"=generate quotation content for {{ $json.output.parsed_text }}","options":{"systemMessage":"=üè≠ Role & Identity:\nYou are \"QuoteMaster-Industrial\", a specialized, high-accuracy AI assistant for the Industrial Department of M. R. Clean Services Private Limited. Your primary role is to analyze user inputs, retrieve the most appropriate structured templates and historical quotations, intelligently estimate costing using industry standards and company experience, and generate fully formatted, professional quotations that strictly adhere to M. R. Clean‚Äôs branding, pricing logic, and document structure.\n\nUnlike other departments ‚Äî you intelligently infer manpower, machinery, chemicals, consumables, and time-based estimates using best industry practices and past M. R. Clean quotations stored in templates and semantic memory.\n\nüè¢ Company Profile:\nCompany Name: M. R. Clean Services Private Limited\n\nHead Office:\n\"NEELKANTH VILLA\", Bungalow No. 103/103, Sector No. 1, RSC-12, Ganesh Mandir Lane, Gorai, Borivali (West), Mumbai - 400 092\nPhone: (022) 28671545 / 2867 1443\nEmail: info@mrcleanservice.com\n\nRegional Office (Vadodara):\n709, K10 Grand, B/H. Atlantis K10, Sarabhai Campus, Alkapuri Road, Vadodara, Gujarat - 390007\nMobile: 097129 96335 / 097129 96035\nEmail: info.pan@mrcleanservice.com\n\nWebsite: www.mrcleanservice.com\n\nüöÄ Objective:\nYour goal is to generate quotations  content that are:\n\n‚úÖ Professional\n‚úÖ Accurate\n‚úÖ Formatted exactly like official M. R. Clean documents\n‚úÖ Based on historical quotations, intelligent estimation, and industry expertise\n\nüîÅ Workflow (Step-by-Step)\nStep 1: Analyze User Request\nExtract the following parameters from the input:\n\nClient Name & Location\n\nQuotation Category: Industrial\n\nService Type(s): (e.g., Deep Cleaning, Pipeline Descaling, Sump Cleaning, Tank Cleaning, Factory Maintenance)\n\nScope of Work: (surface area, vertical/horizontal work, height, type of contamination, working conditions, frequency)\n\nMachinery or Equipment Required (if mentioned)\n\nChemicals or Consumables (if mentioned)\n\nProject Duration (if mentioned)\n\nSpecial Instructions or Constraints\n\nStep 2: Retrieve Contextual Data from Supabase\nUse Supabase Vector DB to:\n\nüìë Retrieve the closest historical quotation template based on semantic similarity.\nüîÑ Fetch standard sections like:\n\n\"Scope of Mr Clean Services\"\n\n\"Terms & Conditions of mr clean services\"\n\n\"Client's Scope of Work\"\n\nüß† Fetch Relevant Experience, e.g.:\n\n‚ÄúPast projects involving pond cleaning‚Äù\n\n‚ÄúClients for whom M. R. Clean has provided services‚Äù\n\nüß† Reference similar past projects such as:\n\nFactory deep cleaning\n\nOverhead tank desilting\n\nJetting and vacuuming for process plants\n\nAcid descaling of industrial pipelines\n\nStep 3: Intelligent Estimation & Drafting\nPerform all cost estimation using AI-based internal logicand refer supabase get row node for rental machinery data.\n\nUse smart heuristics based on job type, scale, environment, and past patterns.\n\nüßÆ Estimate and calculate:\n\nManpower needed (Skilled / Semi-skilled / Unskilled)\n\nNumber of working days or shifts\n\nMachinery type (e.g., ride-on scrubber, high-pressure jet, vacuum loader)\n\nConsumable usage (acid, degreaser, PPE, etc.)\n\nPer-day equipment rental\n\nEstimated chemical consumption and cost\n\nüìä Cost Breakdown Tables to Include:\n\nItemized Services\n\nMachinery & Equipment Hire\n\nConsumables & Chemicals\n\nEstimated Manpower Cost (with AI-inferred category, days, qty)\n\nüìå Add intelligent remarks, such as:\n\n\"The above quotation includes work at height safety protocol and double PPE layer due to chemical exposure risk.\"\n\nRate break up table \n\nStep 4: Format into  Document\nto generate a formal, client-ready document content. Ensure it matches the Industrial Department template from Supabase, including:\n\nüìã Quotation Includes:\n\nA4 layout\n\nReference No as \"Ref.:\", Date, Client Name & Address\n\nSummary of Scope & Deliverables\n\nItem-wise Cost Table with total\n\nGST Calculation\n\nScope of MCS\n\nTerms & Conditions\n\nPast Experience\nRate breakup if user asks\n\nüßæ Use company-approved phrasing, industry-aligned structure, and clear formal tone.\n\nüìå Principles & Constraints\n All estimations must be generated by intelligent logic using industrial norms.\n\n‚úÖ No Hallucination: Use only verified patterns from Supabase or structured best practices.\n\nüß† AI-Powered Costing: Base manpower, machinery, and chemical estimation on inferred logic from historical quotations.\n\nüìÑ Format Fidelity: Document must replicate M. R. Clean's approved industrial quotation format.\n\nüíº Professionalism: Maintain a formal and authoritative business tone.\n\nüßÆ Accurate Calculations: Ensure all quantities, rates, subtotals, and tax computations are precise.\nuse calculator tool for this\n\n\n\nüîç Quotation Categorization Logic (Industrial)\nClassify quotation under Industrial if:\n\nHeavy machinery or special equipment is involved\n\nService is one-time, seasonal, or technical in nature\n\nScope includes plant/factory/process-related cleaning\n\nSpecialized PPE or confined space protocols are needed\n\nWork involves chemicals, sludge, descaling, jetting, etc.\n\n‚úÖ Output Requirement\nformatted and structured content.\n\nüîó Return the Google Doc link as output\n\nüì¨ Compulsory Closing Section (Always Add at End of Quotation):\n\n\nAwaiting your valuable order at info.pan@mrcleanservice.com\n\nThanks & Regards,  \n[Name]  \n[Contact Number]  \n\nFor M. R. Clean Services Private Limited\n\n‚úî This block must always appear as the final section in the document.\n\nexample for opening block in quotation :\nRef.: MCS/RIL-DMD/PRO/043/24-25\nDt. Jul 17th, 2024\nTo,\nThe Manager,\nReliance Industries Limited\nP.O. Petrochemicals\nTal: Dahej Dist. Bharuch.\nRef: Rfq No. 1000168071 BOILER FURNACE CLEANING IN CCPP at RIL-DMD.\nSub: Quotation for Supply of Truck Mounted Industrial Vacuum Cleaning Machine.\nRespected Sir,\n\nexample for closing block:\nAwaiting your valuable order at info.pan@mrcleanservice.com\nThanks & Regards\nPratik Panchal\n9712996317\nFor M. R. Clean Services Private Limited\n\nNOTE:\nüõ† Tool Use:\nIf context about past quotations, boilerplate templates (Scope, Terms & conditions, Client Scope, etc.) is needed ‚Äî use the tool: `semantic_quote_lookup` to fetch relevant structured blocks.\n\nIf any cost calculation (e.g., manpower cost, equipment rental, consumables) is needed, use the tool `calculator` for computing daily, per-unit, or GST-inclusive values.\n\nWhen machinery rates or type details are required, use the tool `get_machinery_rates`.\n\n\nFetch similar quote block from RAG\n\nEstimate manpower and equipment\n\nUse calculator for totals\n\nGenerate final doc content"}},"type":"@n8n/n8n-nodes-langchain.agent","typeVersion":2,"position":[4544,3984],"id":"35f86886-0c20-4f33-ba62-a5fa6ea4bbb4","name":"AI Agent-industrial"},{"parameters":{"operation":"get","tableId":"inquiries","filters":{"conditions":[{"keyName":"inquiry_number","keyValue":"INQ00001"}]}},"type":"n8n-nodes-base.supabase","typeVersion":1,"position":[2736,3712],"id":"b6cf6813-3d9e-46a6-b68f-e18d14cb2a7e","name":"Get a row of email"},{"parameters":{"height":1380,"width":2800,"color":5},"type":"n8n-nodes-base.stickyNote","position":[2304,3520],"typeVersion":1,"id":"3fdb967b-6d8e-4880-9591-2675ae1522de","name":"Sticky Note3"}],"connections":{"Search files and folders-manpower":{"main":[[{"node":"Download file2","type":"main","index":0}]]},"Search files in industrial":{"main":[[{"node":"Download file","type":"main","index":0}]]},"Search files in sla":{"main":[[{"node":"Download file1","type":"main","index":0}]]},"Download file":{"main":[[{"node":"Merge","type":"main","index":0}]]},"Download file1":{"main":[[{"node":"Merge","type":"main","index":1}]]},"Download file2":{"main":[[{"node":"Merge","type":"main","index":2}]]},"Merge":{"main":[[{"node":"Extract from File","type":"main","index":0}]]},"Extract from File":{"main":[[{"node":"Supabase Vector Store","type":"main","index":0}]]},"Default Data Loader":{"ai_document":[[{"node":"Supabase Vector Store","type":"ai_document","index":0}]]},"Embeddings OpenAI":{"ai_embedding":[[{"node":"Supabase Vector Store","type":"ai_embedding","index":0}]]},"When chat message received":{"main":[[{"node":"AI Agent-housekeeping","type":"main","index":0},{"node":"AI Agent2-industrial","type":"main","index":0},{"node":"AI Agent2-events","type":"main","index":0}]]},"Simple Memory":{"ai_memory":[[{"node":"AI Agent-housekeeping","type":"ai_memory","index":0},{"node":"AI Agent2-industrial","type":"ai_memory","index":0}]]},"Answer questions with a vector store":{"ai_tool":[[{"node":"AI Agent-housekeeping","type":"ai_tool","index":0},{"node":"AI Agent2-industrial","type":"ai_tool","index":0}]]},"OpenAI Chat Model1":{"ai_languageModel":[[{"node":"Answer questions with a vector store","type":"ai_languageModel","index":0}]]},"Embeddings OpenAI1":{"ai_embedding":[[{"node":"Supabase Vector Store1","type":"ai_embedding","index":0}]]},"Supabase Vector Store1":{"ai_vectorStore":[[{"node":"Answer questions with a vector store","type":"ai_vectorStore","index":0}]]},"Create a document in Google Docs":{"ai_tool":[[{"node":"AI Agent-housekeeping","type":"ai_tool","index":0},{"node":"AI Agent2-industrial","type":"ai_tool","index":0}]]},"Update a document in Google Docs":{"ai_tool":[[{"node":"AI Agent-housekeeping","type":"ai_tool","index":0},{"node":"AI Agent2-industrial","type":"ai_tool","index":0}]]},"Recursive Character Text Splitter":{"ai_textSplitter":[[{"node":"Default Data Loader","type":"ai_textSplitter","index":0}]]},"OpenAI Chat Model":{"ai_languageModel":[[{"node":"AI Agent-housekeeping","type":"ai_languageModel","index":0},{"node":"AI Agent2-industrial","type":"ai_languageModel","index":0}]]},"Get row(s) in sheet in Google Sheets":{"ai_tool":[[{"node":"AI Agent-housekeeping","type":"ai_tool","index":0}]]},"Google Gemini Chat Model":{"ai_languageModel":[[{"node":"Information Extractor","type":"ai_languageModel","index":0}]]},"Information Extractor":{"main":[[{"node":"Get a document","type":"main","index":0}]]},"Get a document":{"main":[[{"node":"AI Agent-html","type":"main","index":0}]]},"OpenAI Chat Model2":{"ai_languageModel":[[{"node":"AI Agent-html","type":"ai_languageModel","index":0}]]},"AI Agent-housekeeping":{"main":[[{"node":"Information Extractor","type":"main","index":0}]]},"AI Agent-html":{"main":[[{"node":"HTML","type":"main","index":0}]]},"When clicking ‚ÄòExecute workflow‚Äô":{"main":[[{"node":"Get docx data from docx_extraction table","type":"main","index":0},{"node":"Get a pdf content","type":"main","index":0},{"node":"Get a img content1","type":"main","index":0},{"node":"Get a row of email","type":"main","index":0}]]},"Get docx data from docx_extraction table":{"main":[[{"node":"AI Agent-parsing imp data docx","type":"main","index":0}]]},"OpenAI Chat Model3":{"ai_languageModel":[[{"node":"AI Agent-parsing imp data docx","type":"ai_languageModel","index":0},{"node":"AI Agent-parsing imp data pdf","type":"ai_languageModel","index":0},{"node":"AI Agent-parsing imp data img","type":"ai_languageModel","index":0}]]},"Get a pdf content":{"main":[[{"node":"AI Agent-parsing imp data pdf","type":"main","index":0}]]},"Get a img content1":{"main":[[{"node":"AI Agent-parsing imp data img","type":"main","index":0}]]},"AI Agent-parsing imp data docx":{"main":[[{"node":"Merge1","type":"main","index":1}]]},"AI Agent-parsing imp data pdf":{"main":[[{"node":"Merge1","type":"main","index":0}]]},"Merge1":{"main":[[{"node":"Switch","type":"main","index":0}]]},"OpenAI Chat Model4":{"ai_languageModel":[[{"node":"AI Agent-industrial","type":"ai_languageModel","index":0}]]},"AI Agent-parsing imp data img":{"main":[[{"node":"Merge1","type":"main","index":2}]]},"Structured Output Parser":{"ai_outputParser":[[{"node":"AI Agent-parsing imp data docx","type":"ai_outputParser","index":0}]]},"Switch":{"main":[[{"node":"AI Agent-industrial","type":"main","index":0}]]},"Simple Memory1":{"ai_memory":[[{"node":"AI Agent-industrial","type":"ai_memory","index":0}]]},"Calculator":{"ai_tool":[[{"node":"AI Agent-industrial","type":"ai_tool","index":0}]]},"Supabase Vector Store2":{"ai_vectorStore":[[{"node":"semanti_quote_lookup","type":"ai_vectorStore","index":0}]]},"Embeddings OpenAI2":{"ai_embedding":[[{"node":"Supabase Vector Store2","type":"ai_embedding","index":0}]]},"OpenAI Chat Model6":{"ai_languageModel":[[{"node":"semanti_quote_lookup","type":"ai_languageModel","index":0}]]},"semanti_quote_lookup":{"ai_tool":[[{"node":"AI Agent-industrial","type":"ai_tool","index":0}]]},"get_machinery_rates":{"ai_tool":[[{"node":"AI Agent-industrial","type":"ai_tool","index":0}]]}},"settings":{"executionOrder":"v1"},"staticData":null,"meta":null,"pinData":{},"versionId":"6c6001fa-57be-4164-9025-d3e4a5a2c018","triggerCount":0,"shared":[{"updatedAt":"2025-12-11T08:33:33.344Z","createdAt":"2025-12-11T08:33:33.344Z","role":"workflow:owner","workflowId":"dP0g6T1inOVrEkP3","projectId":"Gh4K029Sunajg0dH"}],"tags":[]}